let amigos=[],sorteioRealizado=!1,toRemove="",sorteado="",sorteioIniciado=!1;function capitalizar(e){return e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" ")}const validaCampoVazio=e=>""===e,validaDuplicado=e=>amigos.includes(e);function validaTrataInput(e){const o=capitalizar(e.replace(/\s+/g," ").trim());validaCampoVazio(o)?alert("Digite o nome do amigo!"):/^[a-zA-Zà-úÀ-Ú ]+$/u.test(o)?validaDuplicado(o)?alert(`Amigo ${o} já adicionado!`):amigos.push(o):alert(`Nome ${o} inválido! O nome deve conter apenas letras!`)}function adicionarAmigo(){document.getElementById("amigo").value.split(",").forEach((e=>validaTrataInput(e))),document.getElementById("resultado").innerHTML="",atualizarListaAmigos(),limparElementos("amigo")}function sortearAmigo(){if(sorteioRealizado)return alert("Sorteio já realizado, adicione novos amigos para sortear novamente!"),void ocultarResultado();if(0===amigos.length)return void alert("Adicione amigos para sortear!");toRemove&&(amigos=amigos.filter((e=>e!==toRemove)),toRemove=""),document.getElementById("adicionar-amigo").disabled=!0,sorteado=amigos[Math.floor(Math.random()*amigos.length)],1==amigos.length?sorteioRealizado=!0:toRemove=sorteado;let e=!!sorteioRealizado;limparElementos("amigo","listaAmigos"),alterarValorElemento("resultado",sorteado),alterarClasseElemento("hiden-elements","remove","hidden"),document.getElementById("auto-sorteio").disabled=e}function resortearAmigo(){let e=sorteado;for(;sorteado==e;)sorteado=amigos[Math.floor(Math.random()*amigos.length)];limparElementos("amigo","listaAmigos"),alterarValorElemento("resultado",sorteado),document.getElementById("auto-sorteio").disabled=!0,toRemove=sorteado}function atualizarListaAmigos(){alterarValorElemento("listaAmigos",amigos.map((e=>`<li>${e}</li>`)).join(""))}function reiniciarAmigoSecreto(){document.getElementById("adicionar-amigo").disabled=!1,limparElementos("amigo","resultado","listaAmigos"),alterarClasseElemento(elemento="hiden-elements","add","hidden"),amigos=[],sorteioRealizado=!1,sorteado="",toRemove=""}function ocultarResultado(){document.getElementById("auto-sorteio").disabled=!0,alterarClasseElemento("hiden-elements","add","hidden"),sorteioRealizado?(alterarValorElemento("resultado",""),reiniciarAmigoSecreto()):alterarValorElemento("resultado","Continue sorteando!")}function limparElementos(...e){e.forEach((e=>{alterarValorElemento(e,""),document.getElementById(e).value=""}))}function alterarValorElemento(e,o){document.getElementById(e).innerHTML=o}function alterarClasseElemento(e,o,a){document.getElementById(e).classList[o](a)}